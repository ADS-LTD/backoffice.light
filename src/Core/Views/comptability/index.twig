{% extends session.coreShareViewsF ~ "layout.twig" %} {% block styles %}
<link rel="stylesheet" href="{{ base_url() }}/css/plugins/dataTables/datatables.min.css" />
<link rel="stylesheet" href="{{ base_url() }}/css/print.css" media="print"/>
<!--  Datatables CSS -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.20/datatables.min.css"/>  
{% endblock styles %} {% block content %}
<div id='sectionAimprimer'>
    <div class="ibox">
        <div class="ibox-title">
            <h5><i class="fa fa-balance-scale m-r-sm"></i>{{LexiqueGetString('comptability')}}</h5>
            <div class="ibox-tools">
                <button onClick="window.print();" class="btn btn-primary btn-quick"><i class="fa fa-plus m-r-xs" id="print-btn"></i>{{LexiqueGetString('print')}}</button>
            </div>
            <br />
            <br />
            <div class="row input-daterange">
                <div class="col-md-3">
                    <input type="text" name="from_date" id="from_date" class="form-control" placeholder="De" />
                </div>
                <div class="col-md-3">
                    <input type="text" name="to_date" id="to_date" class="form-control" placeholder="Ã€" />
                </div>
                <div class="col-md-3">
                    <button type="button" name="filter" id="filter" class="btn btn-primary">{{LexiqueGetString('filter')}}</button>
                    <button type="button" name="refresh" id="refresh" class="btn btn-default">{{LexiqueGetString('refresh')}}</button>
                </div>
            </div>
            <br />
        </div>
        <div class="ibox-content">

            <div class="table-responsive">
                <table class="table table-striped table-hover" id="comptability">
                    <thead>
                        <tr>
                            <th>{{LexiqueGetString('id')}}</th>
                            <th>{{LexiqueGetString('transDate')}}</th>
                            <th>{{LexiqueGetString('reference')}}</th>
                            <th>{{LexiqueGetString('teller')}}</th>
                            <th>{{LexiqueGetString('branch')}}</th>
                            <th>{{LexiqueGetString('city')}}</th>
                            <th>{{LexiqueGetString('regions')}}</th>
                            <th>{{LexiqueGetString('amount')}}</th>
                            <th>{{LexiqueGetString('fees')}}</th> 
                            <th>{{LexiqueGetString('partner')}}</th>
                            <th>{{LexiqueGetString('operator')}}</th>
                            <th>{{LexiqueGetString('status')}}</th> 
                            <th class="no-sort"></th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                    <tfoot>
                        <tr>
                            <th colspan="3">{{LexiqueGetString('total')}}</th>
                            <th id="total_order"></th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>  
{% endblock content %} {% block scripts %}
<!--  Datatables JS-->
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.20/datatables.min.js"></script>   
<!-- SUM()  Datatables-->
<script src="{{ base_url() }}/js/plugins/dataTables/datatables.min.js"></script>
<script src="{{ base_url() }}/js/imprimer.js"></script>
<!-- SUM()  Datatables-->
<script src="{{ base_url() }}/js/sum.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var table = $('#comptability').DataTable({
        //var $table = $('#comptability');
        //var dataTable = $table.DataTable({
            "language": dtLanguage,
            "responsive": true,
            "processing": false,
            "serverSide": true,
            "order": [
                [1, "asc"],
                [0, 'asc']
            ],
            "columnDefs": [{
                targets: 'no-sort',
                orderable: false
            }],
            "ajax": {
                url: '{{path_for("comptability.dt")}}',
                type: "post",
                "data": function(d) {
                    d.__RequestVerificationToken = $('input[name="__RequestVerificationToken"]').val();
                },
                complete: function(e, settings, json, xhr) {
                    table.tooltip({
                        selector: "[data-toggle=tooltip]",
                        container: "body"
                    });
                    if (e.hasOwnProperty('responseJSON')) {
                        if (e.responseJSON.hasOwnProperty('__RequestVerificationToken')) {
                            $('input[name="__RequestVerificationToken"]').val(e.responseJSON.__RequestVerificationToken)
                        }
                    }
                },
                error: function() {}
            }
        });
        table.column( 7 ).data().sum();
    }); 
</script>
{% endblock scripts %}